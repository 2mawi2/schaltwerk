import { withOpacity } from '../colorUtils'
import { theme } from '../theme'
import type { ThemeAccent, ThemeDefinition } from './types'

const buildAccent = (base: string, light: string, dark: string): ThemeAccent => ({
  DEFAULT: base,
  light,
  dark,
  bg: withOpacity(base, 0.1),
  border: withOpacity(base, 0.5),
})

export const darkTheme: ThemeDefinition = {
  id: 'dark',
  name: 'Dark',
  isDark: true,
  colors: {
    background: theme.colors.background,
    text: theme.colors.text,
    border: theme.colors.border,
    accent: theme.colors.accent,
    status: theme.colors.status,
    terminal: {
      background: theme.colors.background.secondary,
      foreground: theme.colors.text.primary,
      cursor: theme.colors.text.primary,
      selection: theme.colors.selection.bg,
      black: theme.colors.background.elevated,
      red: theme.colors.accent.red.DEFAULT,
      green: theme.colors.accent.green.DEFAULT,
      yellow: theme.colors.accent.yellow.DEFAULT,
      blue: theme.colors.accent.blue.DEFAULT,
      magenta: theme.colors.accent.purple.DEFAULT,
      cyan: theme.colors.accent.cyan.DEFAULT,
      white: theme.colors.text.primary,
      brightBlack: theme.colors.background.hover,
      brightRed: theme.colors.accent.red.light,
      brightGreen: theme.colors.accent.green.light,
      brightYellow: theme.colors.accent.yellow.light,
      brightBlue: theme.colors.accent.blue.light,
      brightMagenta: theme.colors.accent.purple.light,
      brightCyan: theme.colors.accent.cyan.light,
      brightWhite: theme.colors.text.primary,
    },
  },
}

const lightAccent = {
  blue: buildAccent('#2563eb', '#3b82f6', '#1d4ed8'),
  green: buildAccent('#16a34a', '#22c55e', '#15803d'),
  amber: buildAccent('#d97706', '#f59e0b', '#b45309'),
  red: buildAccent('#dc2626', '#ef4444', '#b91c1c'),
  violet: buildAccent('#7c3aed', '#8b5cf6', '#6d28d9'),
  purple: buildAccent('#9333ea', '#a855f7', '#7e22ce'),
  magenta: buildAccent('#db2777', '#ec4899', '#be185d'),
  yellow: buildAccent('#ca8a04', '#eab308', '#a16207'),
  cyan: buildAccent('#0891b2', '#06b6d4', '#0e7490'),
  copilot: buildAccent('#BD79CC', '#D9A6E5', '#8F4A9E'),
}

const tokyonightAccent = {
  blue: buildAccent('#7aa2f7', '#89ddff', '#3d59a1'),
  green: buildAccent('#9ece6a', '#73daca', '#41a6b5'),
  amber: buildAccent('#e0af68', '#ff9e64', '#d19a66'),
  red: buildAccent('#f7768e', '#ff8c9a', '#db4b4b'),
  violet: buildAccent('#bb9af7', '#c9b0ff', '#9d7cd8'),
  purple: buildAccent('#9d7cd8', '#bb9af7', '#7e5db2'),
  magenta: buildAccent('#ff007c', '#ff4d9d', '#c71f6e'),
  yellow: buildAccent('#e0af68', '#ffcb6b', '#d19a66'),
  cyan: buildAccent('#7dcfff', '#b4f9f8', '#2ac3de'),
  copilot: buildAccent('#bb9af7', '#c9b0ff', '#9d7cd8'),
}

const catppuccinAccent = {
  blue: buildAccent('#89b4fa', '#b4befe', '#74c7ec'),
  green: buildAccent('#a6e3a1', '#94e2d5', '#40a02b'),
  amber: buildAccent('#f9e2af', '#f5e0dc', '#fab387'),
  red: buildAccent('#f38ba8', '#f5c2e7', '#eba0ac'),
  violet: buildAccent('#cba6f7', '#f5c2e7', '#b4befe'),
  purple: buildAccent('#cba6f7', '#f5c2e7', '#b4befe'),
  magenta: buildAccent('#f5c2e7', '#f5e0dc', '#cba6f7'),
  yellow: buildAccent('#f9e2af', '#f5e0dc', '#fab387'),
  cyan: buildAccent('#94e2d5', '#89dceb', '#74c7ec'),
  copilot: buildAccent('#cba6f7', '#f5c2e7', '#b4befe'),
}

const catppuccinMacchiatoAccent = {
  blue: buildAccent('#8aadf4', '#91d7e3', '#7dc4e4'),
  green: buildAccent('#a6da95', '#8bd5ca', '#40a02b'),
  amber: buildAccent('#f5a97f', '#eed49f', '#fe640b'),
  red: buildAccent('#ed8796', '#f5bde6', '#d20f39'),
  violet: buildAccent('#c6a0f6', '#f5bde6', '#8839ef'),
  purple: buildAccent('#c6a0f6', '#f5bde6', '#8839ef'),
  magenta: buildAccent('#f5bde6', '#f5bde6', '#ea76cb'),
  yellow: buildAccent('#eed49f', '#f5e0dc', '#df8e1d'),
  cyan: buildAccent('#8bd5ca', '#91d7e3', '#179299'),
  copilot: buildAccent('#c6a0f6', '#f5bde6', '#8839ef'),
}

const everforestAccent = {
  blue: buildAccent('#7fbbb3', '#a7c080', '#5a7785'),
  green: buildAccent('#a7c080', '#b7d99a', '#8da974'),
  amber: buildAccent('#e69875', '#f0a984', '#b87a5e'),
  red: buildAccent('#e67e80', '#f0908a', '#b86466'),
  violet: buildAccent('#d699b6', '#e6a8c6', '#a87a94'),
  purple: buildAccent('#d699b6', '#e6a8c6', '#a87a94'),
  magenta: buildAccent('#d699b6', '#e6a8c6', '#a87a94'),
  yellow: buildAccent('#dbbc7f', '#e8cc8f', '#b09a66'),
  cyan: buildAccent('#83c092', '#9cd6a8', '#6a9a76'),
  copilot: buildAccent('#a7c080', '#b7d99a', '#8da974'),
}

const ayuAccent = {
  blue: buildAccent('#59C2FF', '#73CEFF', '#3D8BC2'),
  green: buildAccent('#AAD94C', '#C2E87A', '#7FD962'),
  amber: buildAccent('#FFB454', '#FFC87A', '#E6A03D'),
  red: buildAccent('#D95757', '#F26D78', '#BF4040'),
  violet: buildAccent('#D2A6FF', '#E0BFFF', '#A87ACC'),
  purple: buildAccent('#D2A6FF', '#E0BFFF', '#A87ACC'),
  magenta: buildAccent('#F28779', '#F5A090', '#D96C5C'),
  yellow: buildAccent('#E6B450', '#F5C878', '#CC9A38'),
  cyan: buildAccent('#39BAE6', '#95E6CB', '#2D94B8'),
  copilot: buildAccent('#D2A6FF', '#E0BFFF', '#A87ACC'),
}

const kanagawaAccent = {
  blue: buildAccent('#7E9CD8', '#7FB4CA', '#2D4F67'),
  green: buildAccent('#98BB6C', '#87A987', '#76946A'),
  amber: buildAccent('#DCA561', '#E6C384', '#C0A36E'),
  red: buildAccent('#C34043', '#E82424', '#8A3536'),
  violet: buildAccent('#957FB8', '#938AA9', '#7E5DB2'),
  purple: buildAccent('#957FB8', '#938AA9', '#7E5DB2'),
  magenta: buildAccent('#D27E99', '#E46876', '#B25068'),
  yellow: buildAccent('#E6C384', '#FF9E3B', '#C0A36E'),
  cyan: buildAccent('#6A9589', '#7AA89F', '#597B70'),
  copilot: buildAccent('#957FB8', '#938AA9', '#7E5DB2'),
}

export const tokyonightTheme: ThemeDefinition = {
  id: 'tokyonight',
  name: 'Tokyo Night',
  isDark: true,
  colors: {
    background: {
      primary: '#1a1b26',
      secondary: '#16161e',
      tertiary: '#1f2335',
      elevated: '#24283b',
      hover: '#292e42',
      active: '#3b4261',
    },
    text: {
      primary: '#c0caf5',
      secondary: '#a9b1d6',
      tertiary: '#737aa2',
      muted: '#565f89',
      inverse: '#1a1b26',
    },
    border: {
      default: '#3b4261',
      subtle: '#292e42',
      strong: '#545c7e',
      focus: tokyonightAccent.blue.DEFAULT,
    },
    accent: tokyonightAccent,
    status: {
      info: '#7dcfff',
      success: '#9ece6a',
      warning: '#e0af68',
      error: '#f7768e',
    },
    terminal: {
      background: '#1a1b26',
      foreground: '#c0caf5',
      cursor: '#c0caf5',
      selection: withOpacity(tokyonightAccent.blue.DEFAULT, 0.3),
      black: '#414868',
      red: '#f7768e',
      green: '#9ece6a',
      yellow: '#e0af68',
      blue: '#7aa2f7',
      magenta: '#bb9af7',
      cyan: '#7dcfff',
      white: '#c0caf5',
      brightBlack: '#545c7e',
      brightRed: '#ff8c9a',
      brightGreen: '#73daca',
      brightYellow: '#ff9e64',
      brightBlue: '#89ddff',
      brightMagenta: '#c9b0ff',
      brightCyan: '#b4f9f8',
      brightWhite: '#c0caf5',
    },
  },
}

export const catppuccinTheme: ThemeDefinition = {
  id: 'catppuccin',
  name: 'Catppuccin Mocha',
  isDark: true,
  colors: {
    background: {
      primary: '#1e1e2e',
      secondary: '#181825',
      tertiary: '#11111b',
      elevated: '#313244',
      hover: '#45475a',
      active: '#585b70',
    },
    text: {
      primary: '#cdd6f4',
      secondary: '#bac2de',
      tertiary: '#a6adc8',
      muted: '#6c7086',
      inverse: '#1e1e2e',
    },
    border: {
      default: '#45475a',
      subtle: '#313244',
      strong: '#585b70',
      focus: catppuccinAccent.blue.DEFAULT,
    },
    accent: catppuccinAccent,
    status: {
      info: '#89dceb',
      success: '#a6e3a1',
      warning: '#fab387',
      error: '#f38ba8',
    },
    terminal: {
      background: '#1e1e2e',
      foreground: '#cdd6f4',
      cursor: '#f5e0dc',
      selection: withOpacity(catppuccinAccent.blue.DEFAULT, 0.3),
      black: '#45475a',
      red: '#f38ba8',
      green: '#a6e3a1',
      yellow: '#f9e2af',
      blue: '#89b4fa',
      magenta: '#f5c2e7',
      cyan: '#94e2d5',
      white: '#bac2de',
      brightBlack: '#585b70',
      brightRed: '#f38ba8',
      brightGreen: '#a6e3a1',
      brightYellow: '#f9e2af',
      brightBlue: '#89b4fa',
      brightMagenta: '#f5c2e7',
      brightCyan: '#94e2d5',
      brightWhite: '#a6adc8',
    },
  },
}

export const catppuccinMacchiatoTheme: ThemeDefinition = {
  id: 'catppuccin-macchiato',
  name: 'Catppuccin Macchiato',
  isDark: true,
  colors: {
    background: {
      primary: '#24273a',
      secondary: '#1e2030',
      tertiary: '#181926',
      elevated: '#363a4f',
      hover: '#494d64',
      active: '#5b6078',
    },
    text: {
      primary: '#cad3f5',
      secondary: '#b8c0e0',
      tertiary: '#a5adcb',
      muted: '#6e738d',
      inverse: '#24273a',
    },
    border: {
      default: '#5b6078',
      subtle: '#494d64',
      strong: '#6e738d',
      focus: catppuccinMacchiatoAccent.blue.DEFAULT,
    },
    accent: catppuccinMacchiatoAccent,
    status: {
      info: '#91d7e3',
      success: '#a6da95',
      warning: '#eed49f',
      error: '#ed8796',
    },
    terminal: {
      background: '#24273a',
      foreground: '#cad3f5',
      cursor: '#f4dbd6',
      selection: withOpacity(catppuccinMacchiatoAccent.blue.DEFAULT, 0.3),
      black: '#494d64',
      red: '#ed8796',
      green: '#a6da95',
      yellow: '#eed49f',
      blue: '#8aadf4',
      magenta: '#f5bde6',
      cyan: '#8bd5ca',
      white: '#b8c0e0',
      brightBlack: '#5b6078',
      brightRed: '#ed8796',
      brightGreen: '#a6da95',
      brightYellow: '#eed49f',
      brightBlue: '#8aadf4',
      brightMagenta: '#f5bde6',
      brightCyan: '#8bd5ca',
      brightWhite: '#a5adcb',
    },
  },
}

export const ayuTheme: ThemeDefinition = {
  id: 'ayu',
  name: 'Ayu Dark',
  isDark: true,
  colors: {
    background: {
      primary: '#0B0E14',
      secondary: '#0D1017',
      tertiary: '#0F131A',
      elevated: '#11151C',
      hover: '#1A1F29',
      active: '#232A36',
    },
    text: {
      primary: '#BFBDB6',
      secondary: '#ACB6BF',
      tertiary: '#6C7380',
      muted: '#565B66',
      inverse: '#0B0E14',
    },
    border: {
      default: '#232A36',
      subtle: '#1A1F29',
      strong: '#3D4452',
      focus: ayuAccent.blue.DEFAULT,
    },
    accent: ayuAccent,
    status: {
      info: '#59C2FF',
      success: '#7FD962',
      warning: '#E6B450',
      error: '#D95757',
    },
    terminal: {
      background: '#0B0E14',
      foreground: '#BFBDB6',
      cursor: '#E6B450',
      selection: withOpacity(ayuAccent.blue.DEFAULT, 0.3),
      black: '#0B0E14',
      red: '#D95757',
      green: '#7FD962',
      yellow: '#E6B450',
      blue: '#59C2FF',
      magenta: '#D2A6FF',
      cyan: '#39BAE6',
      white: '#BFBDB6',
      brightBlack: '#565B66',
      brightRed: '#F26D78',
      brightGreen: '#AAD94C',
      brightYellow: '#FFB454',
      brightBlue: '#73CEFF',
      brightMagenta: '#E0BFFF',
      brightCyan: '#95E6CB',
      brightWhite: '#BFBDB6',
    },
  },
}

export const lightTheme: ThemeDefinition = {
  id: 'light',
  name: 'Light',
  isDark: false,
  colors: {
    background: {
      primary: '#ffffff',
      secondary: '#f6f8fa',
      tertiary: '#eaeef2',
      elevated: '#ffffff',
      hover: '#eaeef2',
      active: '#d1d9e0',
    },
    text: {
      primary: '#1f2328',
      secondary: '#656d76',
      tertiary: '#8c959f',
      muted: '#8c959f',
      inverse: '#ffffff',
    },
    border: {
      default: '#d1d9e0',
      subtle: '#eaeef2',
      strong: '#d1d9e0',
      focus: lightAccent.blue.DEFAULT,
    },
    accent: lightAccent,
    status: {
      info: '#0891b2',
      success: '#16a34a',
      warning: '#d97706',
      error: '#dc2626',
    },
    terminal: {
      background: '#f6f8fa',
      foreground: '#1f2328',
      cursor: '#1f2328',
      selection: withOpacity(lightAccent.blue.DEFAULT, 0.2),
      black: '#1f2328',
      red: lightAccent.red.DEFAULT,
      green: lightAccent.green.DEFAULT,
      yellow: lightAccent.amber.DEFAULT,
      blue: lightAccent.blue.DEFAULT,
      magenta: lightAccent.purple.DEFAULT,
      cyan: lightAccent.cyan.DEFAULT,
      white: '#57606a',
      brightBlack: '#656d76',
      brightRed: lightAccent.red.light,
      brightGreen: lightAccent.green.light,
      brightYellow: lightAccent.amber.light,
      brightBlue: lightAccent.blue.light,
      brightMagenta: lightAccent.purple.light,
      brightCyan: lightAccent.cyan.light,
      brightWhite: '#24292f',
    },
  },
}

export const everforestTheme: ThemeDefinition = {
  id: 'everforest',
  name: 'Everforest',
  isDark: true,
  colors: {
    background: {
      primary: '#2d353b',
      secondary: '#272e33',
      tertiary: '#333c43',
      elevated: '#3d484d',
      hover: '#475258',
      active: '#4f585e',
    },
    text: {
      primary: '#d3c6aa',
      secondary: '#9da9a0',
      tertiary: '#859289',
      muted: '#7a8478',
      inverse: '#2d353b',
    },
    border: {
      default: '#4f585e',
      subtle: '#3d484d',
      strong: '#5c6a72',
      focus: everforestAccent.green.DEFAULT,
    },
    accent: everforestAccent,
    status: {
      info: '#7fbbb3',
      success: '#a7c080',
      warning: '#dbbc7f',
      error: '#e67e80',
    },
    terminal: {
      background: '#2d353b',
      foreground: '#d3c6aa',
      cursor: '#a7c080',
      selection: withOpacity(everforestAccent.green.DEFAULT, 0.3),
      black: '#2d353b',
      red: '#e67e80',
      green: '#a7c080',
      yellow: '#dbbc7f',
      blue: '#7fbbb3',
      magenta: '#d699b6',
      cyan: '#83c092',
      white: '#d3c6aa',
      brightBlack: '#7a8478',
      brightRed: '#e67e80',
      brightGreen: '#a7c080',
      brightYellow: '#dbbc7f',
      brightBlue: '#7fbbb3',
      brightMagenta: '#d699b6',
      brightCyan: '#83c092',
      brightWhite: '#d3c6aa',
    },
  },
}

export const kanagawaTheme: ThemeDefinition = {
  id: 'kanagawa',
  name: 'Kanagawa',
  isDark: true,
  colors: {
    background: {
      primary: '#1F1F28',
      secondary: '#16161D',
      tertiary: '#2A2A37',
      elevated: '#363646',
      hover: '#2A2A37',
      active: '#363646',
    },
    text: {
      primary: '#DCD7BA',
      secondary: '#C8C093',
      tertiary: '#938AA9',
      muted: '#727169',
      inverse: '#1F1F28',
    },
    border: {
      default: '#54546D',
      subtle: '#363646',
      strong: '#727169',
      focus: kanagawaAccent.blue.DEFAULT,
    },
    accent: kanagawaAccent,
    status: {
      info: '#7E9CD8',
      success: '#98BB6C',
      warning: '#FF9E3B',
      error: '#E82424',
    },
    terminal: {
      background: '#1F1F28',
      foreground: '#DCD7BA',
      cursor: '#C8C093',
      selection: withOpacity(kanagawaAccent.blue.DEFAULT, 0.3),
      black: '#090618',
      red: '#C34043',
      green: '#76946A',
      yellow: '#C0A36E',
      blue: '#7E9CD8',
      magenta: '#957FB8',
      cyan: '#6A9589',
      white: '#C8C093',
      brightBlack: '#727169',
      brightRed: '#E82424',
      brightGreen: '#98BB6C',
      brightYellow: '#E6C384',
      brightBlue: '#7FB4CA',
      brightMagenta: '#938AA9',
      brightCyan: '#7AA89F',
      brightWhite: '#DCD7BA',
    },
  },
}
