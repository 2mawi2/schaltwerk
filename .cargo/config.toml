[build]
jobs = 8
# sccache caches compiled crates across worktrees (install: brew install sccache / apt install sccache)
# NOTE: incremental=false is required for sccache to work effectively
# Comment out rustc-wrapper if sccache is not installed
rustc-wrapper = "sccache"
incremental = false

# macOS Intel
[target.x86_64-apple-darwin]
rustflags = ["-C", "target-cpu=native"]

# macOS ARM (Apple Silicon)
[target.aarch64-apple-darwin]
rustflags = ["-C", "target-cpu=native"]

# Linux x86_64 - use mold linker if available (install: apt/brew install mold)
[target.x86_64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "link-arg=-fuse-ld=mold", "-C", "target-cpu=native"]

# Linux ARM64
[target.aarch64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "link-arg=-fuse-ld=mold", "-C", "target-cpu=native"]

[net]
git-fetch-with-cli = true
